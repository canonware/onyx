################################################################################
#
# <Copyright = jasone>
#
# <License>
#
################################################################################
#
# Version: Onyx <Version = onyx>
#
################################################################################

`Test begin\n' print flush

[
    <stdout <$POLLOUT false $POLLWRNORM false>>
    <
	stdout <$POLLOUT false $POLLWRNORM false>
	stderr <$POLLOUT false $POLLWRNORM false>
    >
    <stdout <$POLLOUT false $POLLWRNORM false>>
    <stdout <$POLLOUT true $POLLWRNORM true $garbage `ignore me'>>
    <
	stdout <
	    $POLLIN false
	    $POLLRDNORM false
	    $POLLOUT false
	    $POLLWRNORM false
	>
    >
    <
	stdout <
	    $POLLIN true
	    $POLLRDNORM true
	    $POLLOUT true
	    $POLLWRNORM true
	>
    >
    <
	stdout <
	    $POLLIN false
	    $POLLRDNORM false
	    $POLLOUT false
	    $POLLWRNORM false
	>
	stderr <
	    $POLLIN false
	    $POLLRDNORM false
	    $POLLOUT false
	    $POLLWRNORM false
	>
    >
]{
    `in:\n' print
    dup 2 sprint
    dup 0 poll
    `out:\n' print
    1 sprint 2 sprint
} foreach

`Test end\n' print
pstack
