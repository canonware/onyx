/******************************************************************************
 *
 * <Copyright = jasone>
 * <License>
 *
 ******************************************************************************
 *
 * Version: <Version>
 *
 * Top level Cookfile for building binaries.
 *
 ******************************************************************************/

#include-cooked [fromto % [objdir]/bin/%/Cookfile.inc @bins@]

/*
 * Targets.
 */
bins : @bins@;

bins_bootstrap : [addsuffix _bins_bootstrap @bins@];

bins_tests : [addsuffix _bins_tests @bins@];
bins_check : [addsuffix _bins_check @bins@];
bins_check_update : [addsuffix _bins_check_update @bins@];

bins_install : [addsuffix _bins_install @bins@];

bins_uninstall : [addsuffix _bins_uninstall @bins@];

bins_clean : [addsuffix _bins_clean @bins@];

bins_distclean : [addsuffix _bins_clean @bins@];

/*
 * Build rules for binary C files --> object files.
 */
[objdir]/bin/%0src/%1.o_a : [srcdir]/bin/%0src/%1.c
  set mkdir
{
  [CC] [A_CFLAGS] [CPPFLAGS] -I[srcdir]/bin/%0include -I[objdir]/bin/%0include
       [CPPDEFS] -c [srcdir]/bin/%0src/%1.c -o [target];

  c_incl [CPPFLAGS] -I[srcdir]/bin/%0include -I[objdir]/bin/%0include
         --no-cache -Absent_Local_Ignore -No_System [srcdir]/bin/%0src/%1.c
         "--prefix='"[target]" : "[srcdir]/bin/%0src/%1.c"'"
         "--suffix='set nodefault;'"
         -o [fromto bin/%0src/%1.o_a bin/%0src/%1.d_a [target]];
}
