/******************************************************************************
 *
 * <Copyright = jasone>
 * <License>
 *
 ******************************************************************************
 *
 * Version: Onyx <Version = onyx>
 *
 * Cookfile for onyx_config.
 *
 ******************************************************************************/

/* Include generated dependency files. */
#include-cooked [glob @objroot@/bin/onyx_config/src/"*.d_*"]

/*
 * File lists.
 */

/* Source file. */
ONYX_CONFIG_NSRCS = @srcroot@/bin/onyx_config/src/onyx_config.nx.in.in;

/* LaTeX source files. */
ONYX_CONFIG_TEX_SRCS = ;
ONYX_CONFIG_TEX_SRCS = [addprefix @srcroot@/bin/onyx_config/doc/latex/
                        [ONYX_CONFIG_TEX_SRCS]];
/* ONYX_CONFIG_TEX_SRCS = [ONYX_CONFIG_TEX_SRCS]
                        @objroot@/bin/onyx_config/doc/latex/manual.tex; */

/* Binaries. */
ONYX_CONFIG = @objroot@/bin/onyx_config/bin/onyx_config;

/*
 * User cook'ables.
 */

onyx_config : [ONYX_CONFIG];

onyx_config_bins_tests :
{
}

onyx_config_bins_check :
{
}

onyx_config_bins_check_update :
{
}

onyx_config_bins_bootstrap :
{
}

onyx_config_bins_install : mods_install
#if @enable_onyx@
                     onyx_bins_install
#endif
{
  @INSTALL@ -d [PREFIX]/bin;

  echo \"#!@ONYX@\" > [PREFIX]/bin/onyx_config-@onyx_version@;
  cat [fromto @srcroot@/%0%.nx.in.in @objroot@/%0%.nx.in [ONYX_CONFIG_NSRCS]]
      >> [PREFIX]/bin/onyx_config-@onyx_version@;
  chmod 0755 [PREFIX]/bin/onyx_config-@onyx_version@;

  rm -f [PREFIX]/bin/onyx_config;
  ln -s onyx_config-@onyx_version@ [PREFIX]/bin/onyx_config;

  @INSTALL@ -d [PREFIX]/man/man1;
  @INSTALL@ -m 0444 @objroot@/bin/onyx_config/man/man1/onyx_config.1
            [PREFIX]/man/man1;
}

onyx_config_bins_uninstall :
{
  rm -f [PREFIX]/bin/onyx_config-@onyx_version@;
  rm -f [PREFIX]/bin/onyx_config;
  rm -f [PREFIX]/man/man1/onyx_config.1;
}

onyx_config_bins_clean :
{
  rm -f [fromto @srcroot@/%0%.c @objroot@/%0%.d_a
                [ONYX_COMMON_SRCS] [BONYX_ONLY_SRCS]];
  rm -f [fromto @srcroot@/%0%.c @objroot@/%0%.o_a
                [ONYX_COMMON_SRCS] [BONYX_ONLY_SRCS]];

  rm -f [ONYX_CONFIG];
}

onyx_config_bins_distclean :
{
  rm -f [fromto @srcroot@/%0%.nx.in.in @objroot@/%0%.nx.in [ONYX_CONFIG_NSRCS]];
}

/*
 * Dependencies.
 */

[ONYX_CONFIG] : [fromto @srcroot@/%0%.nx.in.in @objroot@/%0%.nx.in
                        [ONYX_CONFIG_NSRCS]]
#if @enable_onyx@
          tonyx
#endif
  set mkdir
{
  echo \"#!@TONYX@\" > [target];
  cat [fromto @srcroot@/%0%.nx.in.in @objroot@/%0%.nx.in [ONYX_CONFIG_NSRCS]]
      >> [target];
  chmod 0755 [target];
}
