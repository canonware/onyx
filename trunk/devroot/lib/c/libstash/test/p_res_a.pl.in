#-*-mode:perl-*-
################################################################################
#
# <Copyright = jasone>
# <License>
#
################################################################################
#
# Version: <Version>
#
# Tests res_dump().
#
################################################################################

select(STDOUT);
$| = 1;

$srcdir = $ARGV[0];
$objdir = $ARGV[1];

print "\$srcdir: \"$srcdir\", \$objdir: \"$objdir\"\n";

print "1..1\n";

`$objdir/b_res_a $srcdir/b_res_a.res $objdir/b_res_a.dump > $objdir/p_res_a.out 2>&1`;
`diff $srcdir/b_res_a.res $objdir/b_res_a.dump > $objdir/b_res_a.diff 2>&1`;
`diff $objdir/p_res_a.out $srcdir/p_res_a.exp > $objdir/p_res_a.diff 2>&1`;

if ((-s "$objdir/b_res_a.diff") || (-s "$objdir/p_res_a.diff"))
{
    print "not ok 1\n";
}
else
{
    print "ok 1\n";
    unlink("$objdir/p_res_a.diff");
}
#unlink("./b_res_a.diff");
unlink("$objdir/b_res_a.dump");
