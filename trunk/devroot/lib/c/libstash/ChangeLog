1999-03-24  Jason Evans  <jasone@canonware.com>

	* src/buf.c (buf_prepend_bufel): Don't try to append a bufel that
	has a NULL bufc pointer.

1999-03-22  Jason Evans  <jasone@canonware.com>

	* include/libstash/buf_p.h: Set _LIBSTASH_BUF_ARRAY_MIN_SIZE to 1
	in all cases.  Since the array grows exponentially and never
	shrinks, setting the array to a larger size potentially wastes
	space, and saves little effort.

1999-03-17  Jason Evans  <jasone@canonware.com>

	* include/libstash/libstash.h: Fix wretched hack to make TRUE and
	FALSE work.

1999-03-14  Jason Evans  <jasone@canonware.com>

	* src/list.c (list_get_next): Add.
	(list_get_prev): Add.

1999-03-10  Jason Evans  <jasone@canonware.com>

	* src/buf.c (buf_p_catenate_buf): Call buf_p_copy_array() with the
	same arguments in the optimized library as in the debug library
	(other than the extra argument).

1999-03-08  Jason Evans  <jasone@canonware.com>

	* src/buf.c (buf_get_uint8): Fix locking bug.
	(buf_get_uint32): Fix locking bug.
	(buf_get_uint64): Fix locking bug.
	(bufpool_delete): Fix memory leak (Delete the spare buffers list).

1999-03-07  Jason Evans  <jasone@canonware.com>

	* include/libstash/dbg.h (dbg_is_registered): Revert change made
	on 1999-03-01, since the change was not a valid approach, given
	what the dbg class is being used for.

1999-03-04  Jason Evans  <jasone@canonware.com>

	* src/buf.c (buf_p_catenate_buf): Fix an off-by-one bug that
	corrupted the array of a_a if bufel merging was successful.

	* include/libstash/libstash.h: Remove namespace mangling, since it
	serves little purpose, other than obfuscation and complexity.

	* src/buf.c (buf_p_copy_array): Add.  When copying parts of a
	buf's internal array, do one to three memcpy()'s, depending on
	position of the source and destination.  The previous
	implementation naively iterated through the array elements to
	copy, with one memcpy() per element.

1999-03-01  Jason Evans  <jasone@canonware.com>

	* src/mem.c : Add sophisticated logging and checking to the mem class.

	* include/libstash/buf.h : Add public interface for the bufc class.

1999-02-27  Jason Evans  <jasone@canonware.com>

	* include/libstash/dbg.h (dbg_is_registered): Compile to (FALSE)
	for non-debug libraries.

	* include/libstash/buf_p.h (_LIBSTASH_BUF_ARRAY_MIN_SIZE): Set to
	a more reasonable value (64).

1999-02-26  Jason Evans  <jasone@canonware.com>

	* src/buf.c : Complete testing.

1999-02-25  Jason Evans  <jasone@canonware.com>

	* src/mem.c : Add intelligence and logging to mem class that
	detects memory leaks due to never free()ing.

1999-02-24  Jason Evans  <jasone@canonware.com>

	* : Fully implement and partially test buf, bufel, and bufpool.

1999-02-22  Jason Evans  <jasone@canonware.com>

	* : Make libstash_init() and libstash_shutdown() optional.  Avoid
	a memory leak if libstash_init() is called multiple times.

	* : Structural changes to make libstash more friendly with other
	libraries, such as glib.  Change g_* to cw_g_* to avoid namespace
	collisions with glib.  Break libstash.h.in into libstash.h and
	libstash_defs.h.in to allow using #undef in libstash.h.  Make
	cw_bool_t work, even in the presence of cpp definitions of TRUE
	and/or FALSE.

1999-02-18  Jason Evans  <jasone@canonware.com>

	* Makefile: Change _STASH_* to _LIBSTASH_*.

1999-02-15  Jason Evans  <jasone@canonware.com>

	* Makefile.bsd.in : Add Makefile for BSD make.

1999-02-12  Jason Evans  <jasone@canonware.com>

	* src/buf.c: Major rewrite of buf and bufel.  Provide a more
	abstract interface to make using it less painful than before.
	Untested, and some functions unimplemented.

1999-02-03  Jason Evans  <jasone@canonware.com>

	* include/libstash/libstash.h.in (_cw_ntohq): Add.
	(_cw_htonq): Add.

	* src/buf.c (buf_rm_tail_bufel): Add.

1999-02-02  Jason Evans  <jasone@canonware.com>

	* test/c_buf_a.c: Add test for bufel_append_bufel().

	* src/buf.c (bufel_append_bufel): Add.

1999-01-13  Jason Evans  <jasone@canonware.com>

	* include/libstash/log.h: Use __FUNCTION__ in macros.

1999-01-12  Jason Evans  <jasone@canonware.com>

	* src/buf.c (bufel_set_size): Allow truncating a bufel with no
	valid data, even if the begin and end offsets need to be moved
	back.

1998-12-28  Jason Evans  <jasone@canonware.com>

	* : Convert "*_o" variables to "*".

1998-12-25  Jason Evans  <jasone@canonware.com>

	* src/log.c (log_nprintf): Add.

1998-12-04  Jason Evans  <jasone@canonware.com>

	* src/list.c (list_insert_after): Set the list's tail if inserting
	at the end of the list.
	: Use the list_item methods inside of list instead of mucking with
	list_item internals.

	* test/c_list_a.c: Add unit tests for the list_item and list
	public methods.

	* src/list.c (list_item_set): Remove pointer check for a_data.
	(list_delete): Stop trying to free what the data pointers point
	to, and delete the list_item's instead.

1998-12-03  Jason Evans  <jasone@canonware.com>

	* include/libstash/list.h (list_insert_before): Add.

1998-12-02  Jason Evans  <jasone@canonware.com>

	* src/list.c (list_delete): Fix a bug that caused a_list_o->count
	to be decremented twice each time an item was removed.

1998-11-30  Jason Evans  <jasone@canonware.com>

	* Makefile.in: Fold .d* and .o* dependency trees together.  This
	keeps dependency files from being built until an object file is
	built.  The dependency file is always up to date, except in the
	case where the object file would be rebuilt anyway, and this
	causes a rebuild of the dependency file, so everything is fine.
	(EXTRALIBS): Add @LDFLAGS@ to EXTRALIBS.
	(%): Suffix for CTESTS dependency file should be ".d".

1998-11-29  Jason Evans  <jasone@canonware.com>

	* src/locks.c: Added function comments.

	* src/buf.c (bufel_set_beg_offset): Add return value.
	(bufel_set_end_offset): Ditto.
	(bufel_set_size): Fixed an edge condition bug where TRUE was
	returned if (a_size == a_bufel->end_offset).
	(bufel_set_data_ptr): Allow a_buf to equal NULL.

1998-11-27  Jason Evans  <jasone@canonware.com>

	* src/bhp.c (bhp_dump): Implemented.  This needs to go away when
	debugging is complete, or else hooks need to be added for setting
	priority and data printing functions.
	(bhp_p_dump): Added in support of bhp_dump().

	* test/c_cnd_a.c: Don't rely on being able to lock a mutex in one
	thread and unlock it in another thread.

	* : Rename the tests to semi-meaningful names.

1998-11-23  Jason Evans  <jasone@canonware.com>

	* configure.in (CFLAGS): Added -lsocket -lnsl to LIBS for Solaris.

1998-11-22  Jason Evans  <jasone@canonware.com>

	* src/buf.c (bufel_set_data_ptr): Add so that a bufel can be
	handed a buffer and avoid copying.
	(bufel_get_valid_data_size): Add so that it doesn't require two
	funtion calls to determine how much valid data there is.

	* test/c19981014a.c: Get rid of the parts of the test that could
	potentially cause incorrect failures on big endian machines.

	* src/buf.c (bufel_[gs]et_uint8): Endianness shouldn't matter for
	byte access, so simplify the code and ignore endianness.

	* Makefile.in (clean): obj/*/*.p* never exists, so don't delete it.

	* src/lex.c: Clarify the documentation for the '|' character in
	regular expressions and fix a typo.
