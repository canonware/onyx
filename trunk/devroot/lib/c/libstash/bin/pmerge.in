#!@PERL@ -w
#-*-mode:perl-*-
#############################################################################
#
# <Copyright = "jasone">
# <License>
#
#############################################################################
#
# $Source$
# $Author: jasone $
# Current revision: $Revision: 131 $
# Last modified: $Date: 1998-07-07 13:43:45 -0700 (Tue, 07 Jul 1998) $
#
# Description: Merges perl files inton one big happy perl program.
#
#############################################################################

# Set the output filename.
if ($#ARGV == 3)
{
    $perl_path = $ARGV[0];
    $perl_stub = $ARGV[1];
    $infile = $ARGV[2];
    $outfile = $ARGV[3];
}
else
{
    print STDERR 
	"$0 usage: $0 <perl_path> <perl_stub> <input_file> <output_file>\n";
    exit(1);
}

open(OUTFILE, ">$outfile") || die "$0: Can't open \"$outfile\"";

# Insert perl header.
print OUTFILE "#!$perl_path -w\n";

# Insert input file.
open(INFILE, "$infile") || die "$0: Can't open \"$infile\"";

while (<INFILE>)
{
    print OUTFILE $_;
}
close INFILE;

# Insert stub file.
open(STUBFILE, "$perl_stub") || die "$0: Can't open \"$perl_stub\"";

while (<STUBFILE>)
{
    print OUTFILE $_;
}
close STUBFILE;

system("@CHMOD@ u+x $outfile");
