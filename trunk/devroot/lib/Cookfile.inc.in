/******************************************************************************
 *
 * <Copyright = jasone>
 * <License>
 *
 ******************************************************************************
 *
 * Version: <Version>
 *
 * Top level Cookfile for libraries.
 *
 ******************************************************************************/

#include-cooked [fromto % @objdir@/lib/%/Cookfile.inc @libs@]

/*
 * Targets.
 */
libs_a : [addsuffix _libs_a @libs@];
libs_s : [addsuffix _libs_s @libs@];
libs : libs_a libs_s;

libs_tests : [addsuffix _libs_tests @libs@];
libs_check : [addsuffix _libs_check @libs@];
libs_check_update : [addsuffix _libs_check_update @libs@];

libs_bootstrap : [addsuffix _libs_bootstrap @libs@];

libs_install : [addsuffix _libs_install @libs@];

libs_uninstall : [addsuffix _libs_uninstall @libs@];

libs_clean : [addsuffix _libs_clean @libs@];
libs_distclean : [addsuffix _libs_distclean @libs@];

/*
 * Build rules for library C files --> object files.
 */
@objdir@/lib/%0src/%1.o_a : @srcdir@/lib/%0src/%1.c
  set mkdir
{
  [CC] [A_CFLAGS] [CPPFLAGS] [CPPDEFS] -c @srcdir@/lib/%0src/%1.c
       -o [target];

  c_incl [CPPFLAGS] --no-cache -Absent_Local_Ignore -No_System
         @srcdir@/lib/%0src/%1.c
         "--prefix='"[target]" : "@srcdir@/lib/%0src/%1.c"'"
         "--suffix='set nodefault;'"
         -o [fromto lib/%0src/%1.o_a lib/%0src/%1.d_a [target]];
}

@objdir@/lib/%0src/%1.o_s : @srcdir@/lib/%0src/%1.c
  set mkdir
{
  [CC] [S_CFLAGS] [CPPFLAGS] [CPPDEFS] -c @srcdir@/lib/%0src/%1.c
       -o [target];

  c_incl [CPPFLAGS] --no-cache -Absent_Local_Ignore -No_System
         @srcdir@/lib/%0src/%1.c
         "--prefix='"[target]" : "@srcdir@/lib/%0src/%1.c"'"
         "--suffix='set nodefault;'"
         -o [fromto lib/%0src/%1.o_s lib/%0src/%1.d_s [target]];
}
