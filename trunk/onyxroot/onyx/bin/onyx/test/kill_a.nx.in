################################################################################
#
# <Copyright = jasone>
#
# <License>
#
################################################################################
#
# Version: Onyx <Version = onyx>
#
################################################################################

# Called as: kill_a.nx <srcdir> <objdir>

`Test begin\n' print flush

# Signal number.
[
    argv 1 get `/b_kill_a.nx' cat
] forkexec

dup 9 kill

waitpid dup 0 ne {
    `Non-zero exit status: ' exch cvs `\n' 3 ncat print
}{
    pop
} ifelse

# Signal name.
[
    argv 1 get `/b_kill_a.nx' cat
] forkexec

dup $SIGKILL kill

waitpid dup 0 ne {
    `Non-zero exit status: ' exch cvs `\n' 3 ncat print
}{
    pop
} ifelse

0 $SIGCONT kill
pid $SIGCONT kill
# XXX Uncomment once getpgid is implemented.
# getpgid neg $SIGCONT kill

`Test end\n' print
pstack
